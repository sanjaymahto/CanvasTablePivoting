!function(t){var e={};function l(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=t,l.c=e,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},l.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=1)}([function(t,e,l){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var l=0;l<e.length;l++){var r=e[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,l,r){return l&&t(e.prototype,l),r&&t(e,r),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,[{key:"createGrid",value:function(t){this.flag=0;var e=t;this.CSVToArray=function(t,e){e=e||",";for(var l=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],o=null;o=l.exec(t);){var a=o[1];if(a.length&&a!=e&&r.push([]),o[2])var n=o[2].replace(new RegExp('""',"g"),'"');else n=o[3];r[r.length-1].push(n)}return r},this.CSV2JSON=function(t){for(var e=this.CSVToArray(t),l=[],r=1;r<e.length;r++){l[r-1]={};for(var o=0;o<e[0].length&&o<e[r].length;o++){var a=e[0][o];l[r-1][a]=e[r][o]}}return JSON.stringify(l).replace(/},/g,"},\r\n")},this.data=JSON.parse(this.CSV2JSON(e));var l=document.getElementById("canvasTable"),o=l.getContext("2d"),a=200*Object.keys(this.data[0]).length,n=40*(this.data.length+1),i=10;return this.drawBoard=function(){o.clearRect(0,0,l.width,l.height);for(var t=0;t<=a;t+=200)o.moveTo(.5+t+i,i),o.lineTo(.5+t+i,n+i);for(t=0;t<=n;t+=40)o.moveTo(i,.5+t+i),o.lineTo(a+i,.5+t+i);o.strokeStyle="black",o.stroke();for(var e=Object.keys(this.data[0]),r=80,h=0;r<=n;r+=40){for(var f=0,c=0;f<a;f+=200)o.font="normal 16px Verdana",o.fillStyle="black",o.fillText(this.data[h][e[c]],.5+f+i+5,r),++c;++h}for(var s=0,g=0;s<a;s+=200)o.font="bold 16px Verdana",o.fillStyle="black",o.fillText(e[g],.5+s+i+5,35),++g;o.clearRect(11,n+11,l.width,l.height),o.clearRect(a+11,9.5,l.width,l.height)},this.drawBoard(),this.changeHeader=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"16px",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tahoma",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black",h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left";if(0!=this.flag)return"Table has been pivoted";for(var f=Object.keys(this.data[0]),c=0,s=0;c<a;c+=200)o.textAlign=""+h,o.font=t+" "+e+" "+l,o.fillStyle=""+r,o.clearRect(.5+c+i+5,i,200,40),o.fillText(f[s],.5+c+i+5,35),++s;for(var g=0;g<=a;g+=200)o.moveTo(.5+g+i,i),o.lineTo(.5+g+i,n+i);for(g=0;g<=n;g+=40)o.moveTo(i,.5+g+i),o.lineTo(a+i,.5+g+i);o.strokeStyle="black",o.stroke()},this.changeData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"16px",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tahoma",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black",h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left";if(0!=this.flag)return"Table has been Pivoted!";var f=Object.keys(this.data[0]);console.log(f);for(var c=40,s=0;c<n;c+=40){for(var g=0,d=0;g<a;g+=200)o.textAlign=""+h,o.font=t+" "+e+" "+l,o.fillStyle=""+r,o.clearRect(.5+g+i+5,c,200,40),o.fillText(this.data[s][f[d]],.5+g+i+5,c+40),++d;++s}for(var v=0;v<=a;v+=200)o.moveTo(.5+v+i,i),o.lineTo(.5+v+i,n+i);for(v=0;v<=n;v+=40)o.moveTo(i,.5+v+i),o.lineTo(a+i,.5+v+i);o.strokeStyle="black",o.stroke()},this.pivotTable=function(){if(this.flag=1,arguments.length<3)return"please pass all the arguments";for(var t=arguments,e=[],a=[],n=0;n<this.data.length;n++)e.push(this.data[n][arguments[0]]);var i=e.filter(function(t,e,l){return l.indexOf(t)==e});i=i.sort();var h=Object.keys(this.data[0]),f=200*(h.length-(arguments.length-1))+(arguments.length-2)*i.length*200;for(n=0;n<this.data.length;n++)a.push(this.data[n][arguments[arguments.length-1]]);var c=a.filter(function(t,e,l){return l.indexOf(t)==e}),s=40*(c.length+2),g=10;return this.drawPivotBoard=function(){o.clearRect(10.5,10,l.width,l.height);for(var e=0;e<=f;e+=200)o.moveTo(.5+e+g,g),o.lineTo(.5+e+g,s+g);for(e=0;e<=s;e+=40)o.moveTo(g,.5+e+g),o.lineTo(f+g,.5+e+g);o.strokeStyle="black",o.stroke();for(var a=0;a<h.length-1-(t.length-2);a++){if(0==a)var n=11,d=50,v=199,u=3;o.clearRect(n,d,v,u),n+=200}for(var b=0;b<t.length-2;b++){0==b&&(n=200*(h.length-1-(t.length-2))+200+10.5,d=10.5,v=3,u=39.5);for(var p=0;p<i.length;p++){if(p==i.length-1){n+=200;break}o.clearRect(n,d,v,u),n+=200}}o.clearRect(10.5,s+10.5,l.width,l.height),o.clearRect(f+11,9.5,l.width,l.height);for(var y=h,T=y.length-1;T--;)y[T]===t[0]&&y.splice(T,1);for(T=1;T<t.length-1;T++){console.log(t[T]);var k=y.indexOf(t[T]);y.splice(k,1)}for(T=1;T<t.length-1;T++)y.push(t[T]);console.log(y);for(var x=[],m=0;m<c.length;m++){for(var O=[],S=0;S<this.data.length;S++)this.data[S][t[t.length-1]]==c[m]&&O.push(this.data[S]);for(var w=O=O.sort(function(e,l){var r=e[t[0]].toLowerCase(),o=l[t[0]].toLowerCase();return r<o?-1:r>o?1:0}),R=0;R<w.length;R++){for(var B=[],j=0;j<t.length-1;j++)B.push(w[R][t[j]]),delete w[R][t[j]];for(var L=1;L<B.length;L++)for(var C=1;C<t.length-1;C++)w[R][t[C]]=B[L]}x.push(w)}console.log("aggregated data: ",x);for(var V=[],N=function(e){M={};for(var l=function(l){for(F=Object.keys(x[e][l]).map(function(t){return x[e][l][t]}),I=Object.keys(x[e][l]),console.log("array: ",F),P=0;P<F.length;)if(P<y.length-(t.length-2))M[y[P]]=F[P],++P;else{if(P==y.length)break;"object"!=r(M[I[P]])&&(M[I[P]]=[]),M[I[P]].push(F[P]),console.log(F[P]),++P}},o=0;o<x[e].length;o++)l(o);V.push(M)},D=0;D<x.length;D++){var M,F,I,P;N(D)}for(var E=120,A=0,K=0;E<=s;E+=40){for(var _=0,G=0;_<f;_+=200)if(o.font="normal 16px tahoma",o.fillStyle="black",G<y.length-(t.length-2))o.fillText(V[K][h[G]],.5+_+15,E),++G;else{A=i.length;for(var J=0;J<A;J++)void 0==V[K][h[G]][J]||null==V[K][h[G]][J]||""==V[K][h[G]][J]?o.fillText("",.5+_+15,E):o.fillText(V[K][h[G]][J],.5+_+15,E),_+=200;_-=200,++G}if(++K==V.length)break}for(var W=0,U=0;W<=f;W+=200)if(o.font="bold 19px Verdana",o.fillStyle="black",U<y.length-(t.length-2))o.fillText(y[U],.5+W+70,60),++U;else{if(U==y.length)break;1==i.length?(o.fillText(y[U],200*Math.ceil(i.length/2)+(W-160.5)+.5+15,35),++U,W=200*Math.ceil(i.length/2)+(W-160.5)):(o.fillText(y[U],200*Math.ceil(i.length/2)+(W-160.5)+.5+15,35),++U,W=200*Math.ceil(i.length/2)+W)}for(var Z=0,H=0;Z<=f;Z+=200)if(o.font="bold 19px Verdana",o.fillStyle="black",H<y.length-(t.length-2))++H;else{if(H==h.length)break;for(var Y=i,q=0;q<Y.length;q++)o.fillText(Y[q],.5+Z+15,75),Z+=200;Z-=200,++H}},this.drawPivotBoard(),!0},this.columnSpan=function(t,e){0==this.flag&&e>1&&t<=Object.keys(this.data[0]).length&&(this.drawBoard=function(){var r=e;a=200*Object.keys(this.data[0]).length+200*(r-1);var n=40*(this.data.length+1),i=10;console.log(l.width),console.log(l.height),o.clearRect(0,0,l.width,l.height);for(var h=0;h<=a;h+=200)o.moveTo(.5+h+i,i),o.lineTo(.5+h+i,n+i);for(h=0;h<=n;h+=40)o.moveTo(i,.5+h+i),o.lineTo(a+i,.5+h+i);o.strokeStyle="black",o.stroke();for(var f=0;f<r-1;f++){var c,s,g,d;0==f&&(c=200*t+i+.5,s=11,g=.5,d=n-1),o.clearRect(c,s,g,d),c+=200}for(var v=Object.keys(this.data[0]),u=80,b=0;u<=n;u+=40){for(var p=0,y=0;p<a;p+=200)o.font="normal 16px Verdana",o.fillStyle="black",y==t-1&&(o.fillText(this.data[b][v[y]],.5+p+i+5,u),++y,p+=200*e),o.fillText(this.data[b][v[y]],.5+p+i+5,u),++y;++b}for(var T=0,k=0;T<a;T+=200)o.font="bold 16px Verdana",o.fillStyle="black",k==t-1?(o.fillText(v[k],.5+T+i+5,35),++k,T+=200*(e-1)):(o.fillText(v[k],.5+T+i+5,35),++k);console.log("bh bw:",n,a),o.clearRect(10,n+11,l.width,l.height),o.clearRect(a+11,9.5,l.width,l.height)},this.drawBoard())},this.rowsSpan=function(t,e){0==this.flag&&e>1&&t<=this.data.length&&(this.drawBoard=function(){var r=e;n=40*(this.data.length+1)+40*(r-1);var a=200*Object.keys(this.data[0]).length,i=10;console.log(l.width),console.log(l.height),o.clearRect(0,0,l.width,l.height);for(var h=0;h<=a;h+=200)o.moveTo(.5+h+i,i),o.lineTo(.5+h+i,n+i);for(h=0;h<=n;h+=40)o.moveTo(i,.5+h+i),o.lineTo(a+i,.5+h+i);o.strokeStyle="black",o.stroke();for(var f=0;f<r-1;f++){for(var c,s,g,d,v=0;v<=a;v+=200)0==f&&(c=11,s=40*(t+1)+i,g=v-1,d=.5),o.clearRect(c,s,g,d);s+=40}for(var u=Object.keys(this.data[0]),b=80,p=0;b<=n;b+=40){for(var y=0,T=0;y<a;y+=200)o.font="normal 16px Verdana",o.fillStyle="black",p==t-1?o.fillText(this.data[p][u[T]],.5+y+i+5,b+(e-1)/2*40):o.fillText(this.data[p][u[T]],.5+y+i+5,b),++T;p==t-1&&(b+=40*(e-1)),++p}for(var k=0,x=0;k<a;k+=200)o.font="bold 16px Verdana",o.fillStyle="black",o.fillText(u[x],.5+k+i+5,35),++x;console.log("bh bw:",n,a),o.clearRect(10,n+11,l.width,l.height),o.clearRect(a+11,9.5,l.width,l.height)},this.drawBoard())},!0}}]),t}()},function(t,e,l){"use strict";var r,o=l(0),a=(r=o)&&r.__esModule?r:{default:r};!function(t){var e,l;void 0===t.Grid&&(t.Grid=((l={}).create=function(t){return e=new a.default,mobx.observable(e),mobx.observable(e.createGrid("CITY,ZONE,PRODUCT,WEBVISIT,DOWNLOAD\n            BLR,KOR,FC,92,96,\n            BLR,KOR,FB,98,97,\n            BLR,KOR,FM,67,56,\n            BLR,INDR,FC,192,196,\n            BLR,INDR,FB,78,98,\n            BLR,INDR,FM,12,43,\n            KOL,SL,FC,122,135,\n            KOL,SL,FB,123,112\n            KOL,SL,FM,55,78")),mobx.observable(e.pivotTable("PRODUCT","DOWNLOAD","WEBVISIT","ZONE")),e},mobx.spy(function(t){t.type&&console.log(t.type+": ",t)}),l))}(window)}]);
//# sourceMappingURL=app.bundle.js.map