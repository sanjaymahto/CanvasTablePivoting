{"code":"!function(t){var e={};function r(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=1)}([function(t,e,r){\"use strict\";var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return o(t,[{key:\"createGrid\",value:function(t){this.flag=0;var e=t;this.CSVToArray=function(t,e){e=e||\",\";for(var r=new RegExp(\"(\\\\\"+e+'|\\\\r?\\\\n|\\\\r|^)(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\"\\\\'+e+\"\\\\r\\\\n]*))\",\"gi\"),o=[[]],a=null;a=r.exec(t);){var n=a[1];if(n.length&&n!=e&&o.push([]),a[2])var i=a[2].replace(new RegExp('\"\"',\"g\"),'\"');else i=a[3];o[o.length-1].push(i)}return o},this.CSV2JSON=function(t){for(var e=this.CSVToArray(t),r=[],o=1;o<e.length;o++){r[o-1]={};for(var a=0;a<e[0].length&&a<e[o].length;a++){var n=e[0][a];r[o-1][n]=e[o][a]}}return JSON.stringify(r).replace(/},/g,\"},\\r\\n\")},this.data=JSON.parse(this.CSV2JSON(e)),console.log(this.data);var r=document.getElementById(\"canvasTable\"),o=r.getContext(\"2d\"),a=200*Object.keys(this.data[0]).length,n=40*(this.data.length+1),i=10;this.drawBoard=function(){o.clearRect(0,0,r.width,r.height),console.log(a),console.log(n);for(var t=0;t<=a;t+=200)o.moveTo(.5+t+i,i),o.lineTo(.5+t+i,n+i);for(t=0;t<=n;t+=40)o.moveTo(i,.5+t+i),o.lineTo(a+i,.5+t+i);o.strokeStyle=\"black\",o.stroke();var e=Object.keys(this.data[0]);console.log(e);for(var l=80,s=0;l<=n;l+=40){for(var f=0,c=0;f<a;f+=200)o.font=\"normal 16px Verdana\",o.fillStyle=\"black\",o.fillText(this.data[s][e[c]],.5+f+i+5,l),++c;++s}for(var h=0,d=0;h<a;h+=200)o.font=\"bold 16px Verdana\",o.fillStyle=\"black\",o.fillText(e[d],.5+h+i+5,35),++d;o.clearRect(11,n+11,r.width,r.height),o.clearRect(a+11,9.5,r.width,r.height)},this.drawBoard(),this.changeHeader=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been pivoted\";var f=Object.keys(this.data[0]);console.log(f);for(var c=0,h=0;c<a;c+=200)o.textAlign=\"\"+s,o.font=t+\" \"+e+\" \"+r,o.fillStyle=\"\"+l,o.clearRect(.5+c+i+5,i,200,40),o.fillText(f[h],.5+c+i+5,35),++h;for(var d=0;d<=a;d+=200)o.moveTo(.5+d+i,i),o.lineTo(.5+d+i,n+i);for(d=0;d<=n;d+=40)o.moveTo(i,.5+d+i),o.lineTo(a+i,.5+d+i);o.strokeStyle=\"black\",o.stroke()},this.changeData=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been Pivoted!\";var f=Object.keys(this.data[0]);console.log(f);for(var c=40,h=0;c<n;c+=40){for(var d=0,g=0;d<a;d+=200)o.textAlign=\"\"+s,o.font=t+\" \"+e+\" \"+r,o.fillStyle=\"\"+l,o.clearRect(.5+d+i+5,c,200,40),o.fillText(this.data[h][f[g]],.5+d+i+5,c+40),++g;++h}for(var v=0;v<=a;v+=200)o.moveTo(.5+v+i,i),o.lineTo(.5+v+i,n+i);for(v=0;v<=n;v+=40)o.moveTo(i,.5+v+i),o.lineTo(a+i,.5+v+i);o.strokeStyle=\"black\",o.stroke()},this.pivotTable=function(){if(this.flag=1,arguments.length<4)return\"please pass all the arguments\";for(var t=arguments,e=[],a=[],n=[],i=0;i<this.data.length;i++)e.push(this.data[i][arguments[0]]);var l=e.filter(function(t,e,r){return r.indexOf(t)==e}),s=Object.keys(this.data[0]),f=200*(s.length-(arguments.length-1))+(arguments.length-2)*l.length*200;for(i=0;i<this.data.length;i++)n.push(this.data[i][arguments[arguments.length-1]]);var c=n.filter(function(t,e,r){return r.indexOf(t)==e});console.log(c);var h=40*(c.length+2),d=10;this.drawPivotBoard=function(){console.log(\"bw1\",f),console.log(\"bh1\",h),o.clearRect(10.5,10,r.width,r.height);for(var e=0;e<=f;e+=200)o.moveTo(.5+e+d,d),o.lineTo(.5+e+d,h+d);for(e=0;e<=h;e+=40)o.moveTo(d,.5+e+d),o.lineTo(f+d,.5+e+d);o.strokeStyle=\"black\",o.stroke(),s=Object.keys(S[0]),console.log(\"this is Keys for pivoting Table:\",s);for(var n=Object.keys(this.data[0]),i=0;i<n.length-1-(t.length-2);i++){if(0==i)var l=11,c=50,g=199,v=3;o.clearRect(l,c,g,v),l+=200}for(var u=0;u<t.length-2;u++){if(0==u)l=200*(n.length-1-(t.length-2))+200+10.5,c=10.5,g=3,v=39.5;o.clearRect(l,c,g,v),l+=400}o.clearRect(10.5,h+10.5,r.width,r.height),s=Object.keys(this.data[0]);for(var b=0;b<this.data.length;b++){for(var p=this.data[b][s[0]],T=this.data[b][s[1]],y={},k={},x=0;x<this.data.length;x++)this.data[x][s[0]]==p&&this.data[x][s[1]]==T&&(\"FC\"==this.data[x].PRODUCT?(y.FC=this.data[x].WEBVISIT,k.FC=this.data[x].DOWNLOAD):(y.FM=this.data[x].WEBVISIT,k.FM=this.data[x].DOWNLOAD));if(0!=b&&O.city==p&&O.zone==T);else{var O={city:p,zone:T,webvisit:y,download:k};a.push(O)}}var S=a.filter(function(t,e,r){return r.indexOf(t)==e});console.log(\"restructured JSON data: \",S)};for(var g=120,v=0;g<=h;g+=40){for(var u=0,b=0;u<f;u+=200)if(o.font=\"normal 16px Verdana\",o.fillStyle=\"black\",b<=1)o.fillText(pivotingList[v][s[b]],.5+u+15,g),++b;else{var p=Object.keys(pivotingList[v][s[b]]);console.log(p);for(var T=0;T<p.length;T++)console.log(pivotingList[v][s[b]]),console.log(pivotingList[v][s[b]][p[T]]),o.fillText(pivotingList[v][s[b]][p[T]],.5+u+15,g),u+=200;++b,u-=200}if(++v==pivotingList.length)break}for(var y=0,k=0;y<f;y+=200)if(o.font=\"bold 19px Verdana\",o.fillStyle=\"black\",k<=1)o.fillText(s[k],.5+y+70,60),++k;else{if(k==s.length)break;3==k?(o.fillText(s[k],.5+(y+350)+15,35),++k):(o.fillText(s[k],.5+(y+150)+15,35),++k)}for(var x=0,O=0;x<f;x+=200)if(o.font=\"bold 19px Verdana\",o.fillStyle=\"black\",O<=1)++O;else{if(O==s.length)break;for(var S=[\"FC\",\"FM\"],w=0;w<2;w++)o.fillText(S[w],.5+x+15,75),x+=200;x-=200,++O}this.drawPivotBoard()}}}]),t}()},function(t,e,r){\"use strict\";var o=r(0);!function(t){void 0===t.Grid&&(t.Grid={create:function(t){return new o}})}(window)}]);","extractedComments":[]}