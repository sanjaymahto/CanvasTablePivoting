{"code":"!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=1)}([function(t,e,r){\"use strict\";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return n(t,[{key:\"createGrid\",value:function(t){this.flag=0;var e=t;this.CSVToArray=function(t,e){e=e||\",\";for(var r=new RegExp(\"(\\\\\"+e+'|\\\\r?\\\\n|\\\\r|^)(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\"\\\\'+e+\"\\\\r\\\\n]*))\",\"gi\"),n=[[]],o=null;o=r.exec(t);){var a=o[1];if(a.length&&a!=e&&n.push([]),o[2])var i=o[2].replace(new RegExp('\"\"',\"g\"),'\"');else i=o[3];n[n.length-1].push(i)}return n},this.CSV2JSON=function(t){for(var e=this.CSVToArray(t),r=[],n=1;n<e.length;n++){r[n-1]={};for(var o=0;o<e[0].length&&o<e[n].length;o++){var a=e[0][o];r[n-1][a]=e[n][o]}}return JSON.stringify(r).replace(/},/g,\"},\\r\\n\")},this.data=JSON.parse(this.CSV2JSON(e)),console.log(this.data);var r=document.getElementById(\"canvasTable\"),n=r.getContext(\"2d\"),o=200*Object.keys(this.data[0]).length,a=40*(this.data.length+1),i=10;this.drawBoard=function(){n.clearRect(0,0,r.width,r.height),console.log(o),console.log(a);for(var t=0;t<=o;t+=200)n.moveTo(.5+t+i,i),n.lineTo(.5+t+i,a+i);for(t=0;t<=a;t+=40)n.moveTo(i,.5+t+i),n.lineTo(o+i,.5+t+i);n.strokeStyle=\"black\",n.stroke();var e=Object.keys(this.data[0]);console.log(e);for(var l=80,s=0;l<=a;l+=40){for(var c=0,h=0;c<o;c+=200)n.font=\"normal 16px Verdana\",n.fillStyle=\"black\",n.fillText(this.data[s][e[h]],.5+c+i+5,l),++h;++s}for(var f=0,u=0;f<o;f+=200)n.font=\"bold 16px Verdana\",n.fillStyle=\"black\",n.fillText(e[u],.5+f+i+5,35),++u;n.clearRect(10.5,a+10.5,r.width,r.height),n.clearRect(10.5,o+10.5,r.width,r.height)},this.drawBoard(),this.changeHeader=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been pivoted\";var c=Object.keys(this.data[0]);console.log(c);for(var h=0,f=0;h<o;h+=200)n.textAlign=\"\"+s,n.font=t+\" \"+e+\" \"+r,n.fillStyle=\"\"+l,n.clearRect(.5+h+i+5,i,200,40),n.fillText(c[f],.5+h+i+5,35),++f;for(var u=0;u<=o;u+=200)n.moveTo(.5+u+i,i),n.lineTo(.5+u+i,a+i);for(u=0;u<=a;u+=40)n.moveTo(i,.5+u+i),n.lineTo(o+i,.5+u+i);n.strokeStyle=\"black\",n.stroke()},this.changeData=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been Pivoted!\";var c=Object.keys(this.data[0]);console.log(c);for(var h=40,f=0;h<a;h+=40){for(var u=0,d=0;u<o;u+=200)n.textAlign=\"\"+s,n.font=t+\" \"+e+\" \"+r,n.fillStyle=\"\"+l,n.clearRect(.5+u+i+5,h,200,40),n.fillText(this.data[f][c[d]],.5+u+i+5,h+40),++d;++f}for(var g=0;g<=o;g+=200)n.moveTo(.5+g+i,i),n.lineTo(.5+g+i,a+i);for(g=0;g<=a;g+=40)n.moveTo(i,.5+g+i),n.lineTo(o+i,.5+g+i);n.strokeStyle=\"black\",n.stroke()},this.pivotTable=function(){if(this.flag=1,arguments.length<4)return\"please pass all the arguments\";for(var t=arguments,e=[],o=[],a=[],i=0;i<this.data.length;i++)e.push(this.data[i][arguments[0]]);var l=e.filter(function(t,e,r){return r.indexOf(t)==e}),s=Object.keys(this.data[0]),c=200*(s.length-(arguments.length-1))+(arguments.length-2)*l.length*200;for(i=0;i<this.data.length;i++)a.push(this.data[i][arguments[arguments.length-1]]);var h=a.filter(function(t,e,r){return r.indexOf(t)==e});console.log(h);var f=40*(h.length+2),u=10;s=Object.keys(this.data[0]);for(var d=0;d<this.data.length;d++){for(var g=this.data[d][s[0]],v=this.data[d][s[1]],b={},y={},p=0;p<this.data.length;p++)this.data[p][s[0]]==g&&this.data[p][s[1]]==v&&(\"FC\"==this.data[p].PRODUCT?(b.FC=this.data[p].WEBVISIT,y.FC=this.data[p].DOWNLOAD):(b.FM=this.data[p].WEBVISIT,y.FM=this.data[p].DOWNLOAD));if(0!=d&&T.city==g&&T.zone==v);else{var T={city:g,zone:v,webvisit:b,download:y};o.push(T)}}var k=o.filter(function(t,e,r){return r.indexOf(t)==e});console.log(\"restructured JSON data: \",k),this.drawPivotBoard=function(){console.log(\"bw1\",c),console.log(\"bh1\",f),n.clearRect(10.5,10,r.width,r.height);for(var e=0;e<=c;e+=200)n.moveTo(.5+e+u,u),n.lineTo(.5+e+u,f+u);for(e=0;e<=f;e+=40)n.moveTo(u,.5+e+u),n.lineTo(c+u,.5+e+u);n.strokeStyle=\"black\",n.stroke(),keys=Object.keys(k[0]),console.log(\"this is Keys for pivoting Table:\",keys);for(var o=Object.keys(this.data[0]),a=0;a<o.length-1-(t.length-2);a++){if(0==a)var i=11,l=50,s=199,h=3;n.clearRect(i,l,s,h),i+=200}for(var d=0;d<t.length-2;d++){if(0==d)i=200*(o.length-1-(t.length-2))+200+10.5,l=10.5,s=3,h=39.5;n.clearRect(i,l,s,h),i+=400}n.clearRect(10.5,f+10.5,r.width,r.height)},this.drawPivotBoard()}}}]),t}()},function(t,e,r){\"use strict\";var n=r(0);!function(t){void 0===t.Grid&&(t.Grid={create:function(t){return console.log(\"Enter into creting grid Function...\"),new n}})}(window)}]);","extractedComments":[]}