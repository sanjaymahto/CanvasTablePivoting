{"code":"!function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=1)}([function(t,e,r){\"use strict\";var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return a(t,[{key:\"createGrid\",value:function(t){this.flag=0;var e=t;this.CSVToArray=function(t,e){e=e||\",\";for(var r=new RegExp(\"(\\\\\"+e+'|\\\\r?\\\\n|\\\\r|^)(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\"\\\\'+e+\"\\\\r\\\\n]*))\",\"gi\"),a=[[]],n=null;n=r.exec(t);){var o=n[1];if(o.length&&o!=e&&a.push([]),n[2])var i=n[2].replace(new RegExp('\"\"',\"g\"),'\"');else i=n[3];a[a.length-1].push(i)}return a},this.CSV2JSON=function(t){for(var e=this.CSVToArray(t),r=[],a=1;a<e.length;a++){r[a-1]={};for(var n=0;n<e[0].length&&n<e[a].length;n++){var o=e[0][n];r[a-1][o]=e[a][n]}}return JSON.stringify(r).replace(/},/g,\"},\\r\\n\")},this.data=JSON.parse(this.CSV2JSON(e)),console.log(this.data);var r=document.getElementById(\"canvasTable\"),a=r.getContext(\"2d\"),n=200*Object.keys(this.data[0]).length,o=40*(this.data.length+1),i=10;this.drawBoard=function(){a.clearRect(0,0,r.width,r.height),console.log(n),console.log(o);for(var t=0;t<=n;t+=200)a.moveTo(.5+t+i,i),a.lineTo(.5+t+i,o+i);for(t=0;t<=o;t+=40)a.moveTo(i,.5+t+i),a.lineTo(n+i,.5+t+i);a.strokeStyle=\"black\",a.stroke();var e=Object.keys(this.data[0]);console.log(e);for(var l=80,s=0;l<=o;l+=40){for(var c=0,h=0;c<n;c+=200)a.font=\"normal 16px Verdana\",a.fillStyle=\"black\",a.fillText(this.data[s][e[h]],.5+c+i+5,l),++h;++s}for(var f=0,u=0;f<n;f+=200)a.font=\"bold 16px Verdana\",a.fillStyle=\"black\",a.fillText(e[u],.5+f+i+5,35),++u;a.clearRect(11,o+11,r.width,r.height),a.clearRect(n+11,9.5,r.width,r.height)},this.drawBoard(),this.changeHeader=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been pivoted\";var c=Object.keys(this.data[0]);console.log(c);for(var h=0,f=0;h<n;h+=200)a.textAlign=\"\"+s,a.font=t+\" \"+e+\" \"+r,a.fillStyle=\"\"+l,a.clearRect(.5+h+i+5,i,200,40),a.fillText(c[f],.5+h+i+5,35),++f;for(var u=0;u<=n;u+=200)a.moveTo(.5+u+i,i),a.lineTo(.5+u+i,o+i);for(u=0;u<=o;u+=40)a.moveTo(i,.5+u+i),a.lineTo(n+i,.5+u+i);a.strokeStyle=\"black\",a.stroke()},this.changeData=function(t,e,r,l,s){if(0!=this.flag)return\"Table has been Pivoted!\";var c=Object.keys(this.data[0]);console.log(c);for(var h=40,f=0;h<o;h+=40){for(var u=0,d=0;u<n;u+=200)a.textAlign=\"\"+s,a.font=t+\" \"+e+\" \"+r,a.fillStyle=\"\"+l,a.clearRect(.5+u+i+5,h,200,40),a.fillText(this.data[f][c[d]],.5+u+i+5,h+40),++d;++f}for(var g=0;g<=n;g+=200)a.moveTo(.5+g+i,i),a.lineTo(.5+g+i,o+i);for(g=0;g<=o;g+=40)a.moveTo(i,.5+g+i),a.lineTo(n+i,.5+g+i);a.strokeStyle=\"black\",a.stroke()},this.pivotTable=function(){if(this.flag=1,arguments.length<4)return\"please pass all the arguments\";for(var t=arguments,e=[],n=[],o=[],i=0;i<this.data.length;i++)e.push(this.data[i][arguments[0]]);var l=e.filter(function(t,e,r){return r.indexOf(t)==e}),s=Object.keys(this.data[0]),c=200*(s.length-(arguments.length-1))+(arguments.length-2)*l.length*200;for(i=0;i<this.data.length;i++)o.push(this.data[i][arguments[arguments.length-1]]);var h=o.filter(function(t,e,r){return r.indexOf(t)==e});console.log(h);var f=40*(h.length+2),u=10;s=Object.keys(this.data[0]);for(var d=0;d<this.data.length;d++){for(var g=this.data[d][s[0]],v=this.data[d][s[1]],b={},y={},p=0;p<this.data.length;p++)this.data[p][s[0]]==g&&this.data[p][s[1]]==v&&(\"FC\"==this.data[p].PRODUCT?(b.FC=this.data[p].WEBVISIT,y.FC=this.data[p].DOWNLOAD):(b.FM=this.data[p].WEBVISIT,y.FM=this.data[p].DOWNLOAD));if(0!=d&&T.city==g&&T.zone==v);else{var T={city:g,zone:v,webvisit:b,download:y};n.push(T)}}var k=n.filter(function(t,e,r){return r.indexOf(t)==e});console.log(\"restructured JSON data: \",k),this.drawPivotBoard=function(){console.log(\"bw1\",c),console.log(\"bh1\",f),a.clearRect(10.5,10,r.width,r.height);for(var e=0;e<=c;e+=200)a.moveTo(.5+e+u,u),a.lineTo(.5+e+u,f+u);for(e=0;e<=f;e+=40)a.moveTo(u,.5+e+u),a.lineTo(c+u,.5+e+u);a.strokeStyle=\"black\",a.stroke(),keys=Object.keys(k[0]),console.log(\"this is Keys for pivoting Table:\",keys);for(var n=Object.keys(this.data[0]),o=0;o<n.length-1-(t.length-2);o++){if(0==o)var i=11,l=50,s=199,h=3;a.clearRect(i,l,s,h),i+=200}for(var d=0;d<t.length-2;d++){if(0==d)i=200*(n.length-1-(t.length-2))+200+10.5,l=10.5,s=3,h=39.5;a.clearRect(i,l,s,h),i+=400}a.clearRect(10.5,f+10.5,r.width,r.height)},this.drawPivotBoard()}}}]),t}()},function(t,e,r){\"use strict\";var a=r(0);!function(t){void 0===t.Grid&&(t.Grid={create:function(t){return new a}})}(window)}]);","extractedComments":[]}