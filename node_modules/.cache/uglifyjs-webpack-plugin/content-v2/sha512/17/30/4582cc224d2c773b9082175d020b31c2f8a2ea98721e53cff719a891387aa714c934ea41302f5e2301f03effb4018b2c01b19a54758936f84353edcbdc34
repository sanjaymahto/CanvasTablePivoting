{"code":"!function(t){var e={};function r(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=1)}([function(t,e,r){\"use strict\";var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return a(t,[{key:\"createGrid\",value:function(t){this.flag=0;var e=t;this.CSVToArray=function(t,e){e=e||\",\";for(var r=new RegExp(\"(\\\\\"+e+'|\\\\r?\\\\n|\\\\r|^)(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\"\\\\'+e+\"\\\\r\\\\n]*))\",\"gi\"),a=[[]],o=null;o=r.exec(t);){var n=o[1];if(n.length&&n!=e&&a.push([]),o[2])var l=o[2].replace(new RegExp('\"\"',\"g\"),'\"');else l=o[3];a[a.length-1].push(l)}return a},this.CSV2JSON=function(t){for(var e=this.CSVToArray(t),r=[],a=1;a<e.length;a++){r[a-1]={};for(var o=0;o<e[0].length&&o<e[a].length;o++){var n=e[0][o];r[a-1][n]=e[a][o]}}return JSON.stringify(r).replace(/},/g,\"},\\r\\n\")},this.data=JSON.parse(this.CSV2JSON(e)),console.log(this.data);var r=document.getElementById(\"canvasTable\"),a=r.getContext(\"2d\"),o=200*Object.keys(this.data[0]).length,n=40*(this.data.length+1),l=10;this.drawBoard=function(){a.clearRect(0,0,r.width,r.height),console.log(o),console.log(n);for(var t=0;t<=o;t+=200)a.moveTo(.5+t+l,l),a.lineTo(.5+t+l,n+l);for(t=0;t<=n;t+=40)a.moveTo(l,.5+t+l),a.lineTo(o+l,.5+t+l);a.strokeStyle=\"black\",a.stroke();var e=Object.keys(this.data[0]);console.log(e);for(var i=80,f=0;i<=n;i+=40){for(var s=0,c=0;s<o;s+=200)a.font=\"normal 16px Verdana\",a.fillStyle=\"black\",a.fillText(this.data[f][e[c]],.5+s+l+5,i),++c;++f}for(var h=0,d=0;h<o;h+=200)a.font=\"bold 16px Verdana\",a.fillStyle=\"black\",a.fillText(e[d],.5+h+l+5,35),++d;a.clearRect(11,n+11,r.width,r.height),a.clearRect(o+11,9.5,r.width,r.height)},this.drawBoard(),this.changeHeader=function(t,e,r,i,f){if(0!=this.flag)return\"Table has been pivoted\";var s=Object.keys(this.data[0]);console.log(s);for(var c=0,h=0;c<o;c+=200)a.textAlign=\"\"+f,a.font=t+\" \"+e+\" \"+r,a.fillStyle=\"\"+i,a.clearRect(.5+c+l+5,l,200,40),a.fillText(s[h],.5+c+l+5,35),++h;for(var d=0;d<=o;d+=200)a.moveTo(.5+d+l,l),a.lineTo(.5+d+l,n+l);for(d=0;d<=n;d+=40)a.moveTo(l,.5+d+l),a.lineTo(o+l,.5+d+l);a.strokeStyle=\"black\",a.stroke()},this.changeData=function(t,e,r,i,f){if(0!=this.flag)return\"Table has been Pivoted!\";var s=Object.keys(this.data[0]);console.log(s);for(var c=40,h=0;c<n;c+=40){for(var d=0,u=0;d<o;d+=200)a.textAlign=\"\"+f,a.font=t+\" \"+e+\" \"+r,a.fillStyle=\"\"+i,a.clearRect(.5+d+l+5,c,200,40),a.fillText(this.data[h][s[u]],.5+d+l+5,c+40),++u;++h}for(var g=0;g<=o;g+=200)a.moveTo(.5+g+l,l),a.lineTo(.5+g+l,n+l);for(g=0;g<=n;g+=40)a.moveTo(l,.5+g+l),a.lineTo(o+l,.5+g+l);a.strokeStyle=\"black\",a.stroke()},this.pivotTable=function(){if(this.flag=1,arguments.length<4)return\"please pass all the arguments\";for(var t=arguments,e=[],o=[],n=[],l=0;l<this.data.length;l++)e.push(this.data[l][arguments[0]]);var i=e.filter(function(t,e,r){return r.indexOf(t)==e}),f=Object.keys(this.data[0]),s=200*(f.length-(arguments.length-1))+(arguments.length-2)*i.length*200;for(l=0;l<this.data.length;l++)n.push(this.data[l][arguments[arguments.length-1]]);var c=n.filter(function(t,e,r){return r.indexOf(t)==e});console.log(c);var h=40*(c.length+2),d=10;this.drawPivotBoard=function(){a.clearRect(10.5,10,r.width,r.height);for(var e=0;e<=s;e+=200)a.moveTo(.5+e+d,d),a.lineTo(.5+e+d,h+d);for(e=0;e<=h;e+=40)a.moveTo(d,.5+e+d),a.lineTo(s+d,.5+e+d);a.strokeStyle=\"black\",a.stroke(),f=Object.keys(S[0]),console.log(\"this is Keys for pivoting Table:\",f);for(var n=Object.keys(this.data[0]),l=0;l<n.length-1-(t.length-2);l++){if(0==l)var i=11,c=50,u=199,g=3;a.clearRect(i,c,u,g),i+=200}for(var v=0;v<t.length-2;v++){if(0==v)i=200*(n.length-1-(t.length-2))+200+10.5,c=10.5,u=3,g=39.5;a.clearRect(i,c,u,g),i+=400}a.clearRect(10.5,h+10.5,r.width,r.height),f=Object.keys(this.data[0]);for(var b=0;b<this.data.length;b++){for(var T=this.data[b][f[0]],p=this.data[b][f[1]],y={},k={},x=0;x<this.data.length;x++)this.data[x][f[0]]==T&&this.data[x][f[1]]==p&&(\"FC\"==this.data[x].PRODUCT?(y.FC=this.data[x].WEBVISIT,k.FC=this.data[x].DOWNLOAD):(y.FM=this.data[x].WEBVISIT,k.FM=this.data[x].DOWNLOAD));if(0!=b&&O.city==T&&O.zone==p);else{var O={city:T,zone:p,webvisit:y,download:k};o.push(O)}}var S=o.filter(function(t,e,r){return r.indexOf(t)==e});console.log(\"restructured JSON data: \",S);for(var w=120,m=0;w<=h;w+=40){for(var j=0,R=0;j<s;j+=200)if(a.font=\"normal 16px Verdana\",a.fillStyle=\"black\",R<=1)a.fillText(S[m][f[R]],.5+j+15,w),++R;else{var C=Object.keys(S[m][f[R]]);console.log(C);for(var V=0;V<C.length;V++)console.log(S[m][f[R]]),console.log(S[m][f[R]][C[V]]),a.fillText(S[m][f[R]][C[V]],.5+j+15,w),j+=200;++R,j-=200}if(++m==S.length)break}for(var P=0,B=0;P<s;P+=200)if(a.font=\"bold 19px Verdana\",a.fillStyle=\"black\",B<=1)a.fillText(f[B],.5+P+70,60),++B;else{if(B==f.length)break;3==B?(a.fillText(f[B],.5+(P+350)+15,35),++B):(a.fillText(f[B],.5+(P+150)+15,35),++B)}for(var F=0,N=0;F<s;F+=200)if(a.font=\"bold 19px Verdana\",a.fillStyle=\"black\",N<=1)++N;else{if(N==f.length)break;for(var A=[\"FC\",\"FM\"],D=0;D<2;D++)a.fillText(A[D],.5+F+15,75),F+=200;F-=200,++N}},this.drawPivotBoard()}}}]),t}()},function(t,e,r){\"use strict\";var a=r(0);!function(t){void 0===t.Grid&&(t.Grid={create:function(t){return new a}})}(window)}]);","extractedComments":[]}